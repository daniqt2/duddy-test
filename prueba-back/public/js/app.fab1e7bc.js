(function(t){function e(e){for(var n,r,o=e[0],c=e[1],l=e[2],d=0,v=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&v.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(v.length)v.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},s={app:0},i=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1182:function(t,e,a){},"22d7":function(t,e,a){"use strict";a("be87")},"34ba":function(t,e,a){"use strict";a("1182")},"4df6":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("e792"),a("0cdd");var n=a("5f5b"),s=a("2b0e");s["default"].use(n["b"]);a("f9e3"),a("2dd8");var i=a("b1e0"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("nav-bar"),a("div",{staticClass:"container-fluid bg-light py-5 d-flex text-center min"},[a("div",{staticClass:"container bg-white rounded-lg shadow p-4 my-auto mb-5"},[a("router-view")],1)])],1)},o=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[a("router-link",{staticClass:"navbar-brand font-weight-bold",attrs:{to:"/"}},[t._v("Prueba DuddyFit")]),a("div",[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item",class:{active:"home"===this.$route.name}},[a("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Configuracion")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link text-dark",class:{active:"asign"===this.$route.name},attrs:{to:"/asign"}},[t._v(" Resultados ")])],1)])])],1)},l=[],u=(a("34ba"),a("2877")),d={},v=Object(u["a"])(d,c,l,!1,null,null,null),f=v.exports,m={name:"App",components:{NavBar:f},created:function(){console.log(this.$store),this.$store.dispatch("getTrainers"),this.$store.dispatch("getClients")}},p=m,b=(a("5c0b"),Object(u["a"])(p,r,o,!1,null,null,null)),h=b.exports,_=a("8c4f"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("b-tabs",{attrs:{"content-class":"mt-3"}},[a("b-tab",{attrs:{title:"Entrenadores",active:t.selected===t.TABS[0]},on:{click:function(e){t.selected=t.TABS[0]}}},[a("h2",[t._v("Asignación cliente-entrenador")])]),a("b-tab",{attrs:{title:"Valoración de Conjunto",active:t.selected===t.TABS[1]},on:{click:function(e){t.selected=t.TABS[1]}}},[a("h2",[t._v("Satisfacción del conjunto")])])],1)],1),t.notAsignedClients.length?a("div",{staticClass:"p-2 w-25 mx-auto bg-light"},[a("h5",[t._v("Clientes no asignados")]),a("p",[t._v(t._s(t.notAsignedClients))])]):t._e(),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row row-cols-3 mt-5 justify-content-center"},t._l(t.sortedTrainers,(function(e,n){return a("div",{key:e.name,staticClass:"col-md-4 col-12 d-flex align-items-stretch"},[e.clients?a("b-card",{staticClass:"mx-1 mb-4 text-left w-100 shadow border-0",attrs:{"no-body":"",tag:"article"}},[a("b-card-header",{staticClass:"d-flex border-bottom-0 bg-blue"},[a("p",{staticClass:"mr-auto my-auto"},[t._v("Entrenador "+t._s(n+1))]),a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"float-right",attrs:{"custom-class":"tooltip-class",title:"\n                            Valoración: "+e.rank+" --        Max clientes: "+e.slots}},[a("b-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn mb-2",attrs:{icon:"info-circle-fill",variant:"white"}})],1)]),a("b-card-body",[t.selected==t.TABS[0]?a("div",[a("b-card-title",{staticClass:"pb-2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col size emoji-smile-fill text-darl"},[a("div",{staticClass:"bg-light text-center float-left p-2 px-4 rounded"},[a("b-icon",{staticClass:"p-0",attrs:{icon:"emoji-smile-fill",variant:"warning"}})],1)]),a("div",{staticClass:"col align-self-center d-flex"},[a("h4",[t._v(t._s(e.name))])])])]),a("b-card-text",{staticClass:"bg-light p-4 text-center mt-2"},[a("p",[a("b",[t._v(" "+t._s(e.clients.length?" Clientes asignados":"Ningún Cliente Asignado")+" ")])]),t._l(e.clients,(function(e){return a("p",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],key:e.name,attrs:{title:"Satisfacción: "+(e.satisfactation?e.satisfactation:"")}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1):a("div",{staticClass:"text-center"},[a("p",{staticClass:"mb-0"},[t._v("Satisfacción de grupo")]),e.clients.length?a("p",[a("span",{staticClass:"text-info"},[t._v(t._s(t.getS(t.satisfaccion[n])))])]):a("p",[t._v("--Ningún cliente asignado--")])])]),a("b-card-footer",{staticClass:"border-top-0 text-secondary text-center"},[a("p",{staticClass:"my-0"},[t._v(t._s(e.clients.length)+" clientes asignados")])])],1):t._e()],1)})),0)]),t.selected==t.TABS[1]?a("explanation",{attrs:{"chart-data":t.chartData,general:t.generalSatisfaction}}):t._e()],1)},C=[],x=a("53ca"),y=a("2909"),w=a("5530"),k=(a("4e82"),a("d81d"),a("d3b7"),a("b680"),a("07ac"),a("a15b"),a("b0c0"),a("159b"),a("fb6a"),a("a434"),a("2f62")),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-sm-center"},[a("h4",{staticClass:"my-4"},[t._v(" Satisfacción general de los clientes: "),a("span",{staticClass:"text-info"},[t._v(t._s(t.format(t.general))+"/10")])]),a("div",[a("div",{staticClass:"p-4 shadow-sm my-4 text-info bg-light text-md-left"},[t._m(0),t._m(1),t._m(2),t._v(" "+t._s(t.textOne)+" ")]),t._m(3),t._m(4)]),a("div",{staticClass:"border-top py-4"},[a("h4",[t._v("Una forma mas visual de verlo")]),a("div",{staticClass:"p-4 shadow-sm my-4 text-info bg-light"},[t._v(" "+t._s(t.textTwo)+" ")]),t._m(5),a("div",{staticClass:"d-flex"},[a("b-table",{attrs:{small:"",hover:"",items:t.chartData,fields:["index","0","1","2","3","4","5"]},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[t._v(" "+t._s(e.index)+" ")]}}])})],1)])])},O=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" Vamos a considerar la satisfacción "),a("b",[t._v("individual")]),t._v(" de cada cliente entre "),a("b",[t._v("0-1")]),t._v(" donde "),a("b",[t._v("1 = muy satisfecho")]),t._v(" y "),a("b",[t._v("0 = nada satisfecho")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" La "),a("b",[t._v("satisfacción grupal")]),t._v(" de cada entrenador sera entre "),a("b",[t._v("0-10")]),t._v(" (10 es la mas alta) y se calcula con el promedio de sus clientes. ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" La "),a("b",[t._v("satisfacción general")]),t._v(" sera entre "),a("b",[t._v("0-10")]),t._v(" (10 es la mas alta) y es el promedio de satisfacción de todos los clientes. ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",{staticClass:"text-danger"},[t._v("1")]),t._v(" - ( ( "),a("span",{staticClass:"text-warning"},[t._v("A")]),t._v(" - "),a("span",{staticClass:"text-info"},[t._v("B")]),t._v(" ) * "),a("span",{staticClass:"text-success"},[t._v("C")]),t._v(" * "),a("span",{staticClass:"text-danger"},[t._v(".01")]),t._v(" ) ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-left ml-4"},[a("ul",{staticClass:"decoration-none"},[a("li",[a("span",{staticClass:"text-danger"},[t._v("1")]),t._v(" : Lo que tomaremos como el valor mas alto de satisfacción. El .01 es el peso para las unidades. ")]),a("li",[a("span",{staticClass:"text-warning"},[t._v("A")]),t._v(" : Valoración mas alta que puede tener un entrenador (la mejor = 5). ")]),a("li",[a("span",{staticClass:"text-info"},[t._v("B")]),t._v(" : Valoración del cliente asignado. ")]),a("li",[a("span",{staticClass:"text-success"},[t._v("C")]),t._v(" : Importancia que da el cliente a tener un entrenador con alto nivel. ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-left text-sm-center ml-5"},[a("p",{staticClass:"mb-0"},[a("b",[t._v("Index")]),t._v(" : Representa el nivel de importancia que da el cliente. ")]),a("p",{staticClass:"mt-0"},[a("b",[t._v("Columnas")]),t._v(" : Representan los diferentes niveles que puede tomar un entrenador. ")])])}],T=(a("a9e3"),{props:{chartData:{type:Array,default:null},general:{type:Number,default:0}},data:function(){return{textOne:'Para calcular la satisfacción de cada cliente vamos a usar como peso la importancia que da a tener un entrenador con buen nivel o no.\n            Entre mas alta sea la importancia mas se va a "penalizar" que el entrenador tenga buen nivel o no. Para ello se usa la siguiente formula:',textTwo:"La siguiente tabla muestra todas las combinaciones posibles de entrenador-cliente (asumiendo numeros enteros) y la satisfacción de esta. \n            Se puede ver facilmente como entre mas sube la importancia del cliente, el peso es mayor y por ende la satisfacción baja al tener entrenadores con menor\n            valoración"}},methods:{format:function(t){return t.toFixed(2)}}}),S=T,$=Object(u["a"])(S,j,O,!1,null,null,null),A=$.exports,E=["entrenadores","valoracion"],V={components:{Explanation:A},computed:Object(w["a"])(Object(w["a"])({},Object(k["b"])(["trainers","clients"])),{},{sortedTrainers:function(){return this.sort("rank",this.trainers)},sortedClients:function(){return this.sort("importance",this.clients)},satisfaccion:function(){return this.sortedTrainers.map((function(t){var e=t.clients.reduce((function(t,e){var a=e.satisfactation;return t+parseFloat(a)}),0),a=e/t.clients.length,n=a.toFixed(2);return n}))||[]},satisfactationSum:function(){return this.satisfaccion?this.satisfaccion.reduce(this.add,0):null},chartData:function(){for(var t={},e=0;e<=this.maxClientRank;e++){t[e]={},t[e].index=e;for(var a=0;a<=this.maxTrainerRank;a++)t[e][a]=this.calc(e,a)}return Object.values(t)},generalSatisfaction:function(){var t=this.clients.reduce((function(t,e){var a=e.satisfactation;return t+parseFloat(a)}),0);return console.log("aaa",t),t},notAsignedClients:function(){return this.notAsigned.map((function(t){return t.name})).join(",")}}),data:function(){return{clonedClients:[],selected:E[0],TABS:E,maxSatisValue:50,maxTrainerRank:5,maxClientRank:10,notAsigned:[]}},watch:{sortedTrainers:function(){this.asign()},sortedClients:function(){this.asign()}},created:function(){this.asign()},methods:{sort:function(t,e){var a=Object(y["a"])(e);return a.sort((function(e,a){return e[t]-a[t]})).reverse()},asign:function(){var t=this,e=Object(y["a"])(this.sortedClients);this.sortedTrainers.forEach((function(a){var n=a.slots,s=e.slice(0,n);e.splice(0,n),s.forEach((function(e){return e.satisfactation=t.calc(e.importance,a.rank)})),t.$set(a,"clients",s)})),this.notAsigned=Object(y["a"])(e)},calc:function(t,e){return(1-(this.maxTrainerRank-e)*t*.01).toFixed(2)},add:function(t,e){return t+parseFloat(e)},getS:function(t){return console.log(t,Object(x["a"])(t)),(10*parseFloat(t)).toFixed(2)}}},B=V,N=(a("d43c"),Object(u["a"])(B,g,C,!1,null,null,null)),P=N.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticClass:"text-center"},[t._v("Pantalla de configuración")]),t.trainersClone?a("div",[t._l(t.trainersClone,(function(e,n){return a("div",{key:e.name,staticClass:"row py-5 px-4",class:{"border-bottom":n<t.trainers.length-1}},[a("div",{staticClass:"col-sm my-2"},[t._v(" Nombre "),a("input",{staticClass:"ml-2 border-gray-light p-2",domProps:{value:e.name},on:{change:function(a){return t.setTrainer(e,a)}}})]),a("div",{staticClass:"col-sm my-2"},[t._v(" Valoración "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.rank,expression:"trainer.rank"}],staticClass:"ml-2 p-2",class:{"border border-danger text-danger":!t.rankValidity[n],"border-gray-light":t.rankValidity[n]},domProps:{value:e.rank},on:{input:function(a){a.target.composing||t.$set(e,"rank",a.target.value)}}}),t.rankValidity[n]?t._e():a("p",{staticClass:"text-danger small mt-2"},[t._v("Value should be between 0-5")])]),a("div",{staticClass:"col-sm my-2"},[t._v(" Máximo número de clientes "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.slots,expression:"trainer.slots"}],staticClass:"p-2 border-gray-light",on:{change:function(a){var n=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"slots",a.target.multiple?n:n[0])}}},t._l(10,(function(e){return a("option",{key:e},[t._v(t._s(e))])})),0)])])})),a("div",[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticClass:"mr-2",attrs:{variant:"secondary"}},[t._v("Ver Tabla de Clientes")]),a("b-button",{attrs:{variant:"info",disabled:!t.allValid},on:{click:t.updateTrainers}},[t._v("Calcular Resultados")])],1),a("b-modal",{attrs:{id:"modal-1",title:"Clientes"}},[a("modal")],1)],2):t._e()])},R=[],q=(a("e9c4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container px-5"},t._l(t.clients,(function(e,n){return a("div",{key:e.name,staticClass:"row py-4",class:{"border-bottom":n<t.clients.length-1}},[a("div",{staticClass:"col-sm"},[a("b",[t._v("Nombre:")]),t._v(" "+t._s(e.name)+" ")]),a("div",{staticClass:"col-sm"},[a("b",[t._v("Importancia:")]),t._v(" "+t._s(e.importance)+" ")])])})),0)}),M=[],D={computed:Object(w["a"])({},Object(k["b"])(["clients"]))},J=D,L=(a("22d7"),Object(u["a"])(J,q,M,!1,null,null,null)),I=L.exports,z={components:{Modal:I},data:function(){return{trainersClone:null,lolo:"dsadas"}},computed:Object(w["a"])(Object(w["a"])({},Object(k["b"])(["trainers"])),{},{rankValidity:function(){return this.trainersClone.map((function(t){return t.rank<=5&&t.rank>=0}))},allValid:function(){return this.trainersClone.every((function(t){return t.rank<=5&&t.rank>=0}))}}),watch:{trainers:function(t){this.trainersClone=t}},created:function(){this.trainersClone=JSON.parse(JSON.stringify(this.trainers))},methods:{updateTrainers:function(){var t=this;this.$store.dispatch("updateTrainers",this.trainersClone).then((function(){t.$router.push({name:"asign"})}))},setTrainer:function(t,e){this.$set(t,"name",e.target.value)}}},U=z,G=(a("b1e3"),Object(u["a"])(U,F,R,!1,null,null,null)),H=G.exports;s["default"].use(_["a"]);var K=[{path:"/",name:"home",component:H},{path:"/asign",name:"asign",component:P}],Q=new _["a"]({mode:"history",routes:K}),W=Q,X=a("d4ec"),Y=a("bee2"),Z=a("bc3a"),tt=a.n(Z),et="api/",at=function(){function t(){Object(X["a"])(this,t)}return Object(Y["a"])(t,null,[{key:"getClients",value:function(){return this.fetchBase("".concat(et,"clients"))}},{key:"getTrainers",value:function(){return this.fetchBase("".concat(et,"trainers"))}},{key:"fetchBase",value:function(t){return tt.a.get(t).then((function(t){return t.data})).catch((function(t){return t}))}},{key:"postBase",value:function(t,e){return tt.a.post(t,e).catch((function(){throw new Error("There was an error trying to post your data")}))}}]),t}(),nt=at;s["default"].use(k["a"]);var st=new k["a"].Store({state:{trainers:[],clients:[]},actions:{getClients:function(t){var e=t.commit;return nt.getClients().then((function(t){e("saveClients",t.clients)}))},setClients:function(t,e){var a=t.commit;a("saveClients",e)},getTrainers:function(t){var e=t.commit;return nt.getTrainers().then((function(t){return e("saveTrainers",t.trainers),console.log(t),t}))},updateTrainers:function(t,e){var a=t.commit;new Promise((function(t){a("saveTrainers",e),t(e)}))}},mutations:{saveClients:function(t,e){t.clients=e},saveTrainers:function(t,e){console.log("saving"),t.trainers=e}}}),it=st;s["default"].use(n["a"]),s["default"].use(i["a"]),s["default"].config.productionTip=!1,new s["default"]({render:function(t){return t(h)},store:it,router:W}).$mount("#app")},"5c0b":function(t,e,a){"use strict";a("9c0c")},"850c":function(t,e,a){},"9c0c":function(t,e,a){},b1e3:function(t,e,a){"use strict";a("4df6")},be87:function(t,e,a){},d43c:function(t,e,a){"use strict";a("850c")}});
//# sourceMappingURL=app.fab1e7bc.js.map